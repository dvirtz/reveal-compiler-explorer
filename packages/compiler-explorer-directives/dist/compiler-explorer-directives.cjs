(()=>{var e={751:(e,t,r)=>{"use strict";const o=r(111);class n extends Error{constructor(e,...t){let r;super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,n),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e),Object.defineProperty(this,"responseBody",{get:()=>(r||(r=this.arrayBuffer()),r)}),this.headers={};for(const[t,r]of e.headers.entries())this.headers[t.toLowerCase()]=r}}e.exports=o(((e,t,r,o,s)=>async(i,a,c={})=>{i=s+(i||"");let l=new URL(i);if(o||(o={}),l.username&&(o.Authorization="Basic "+btoa(l.username+":"+l.password),l=new URL(l.protocol+"//"+l.host+l.pathname+l.search)),"https:"!==l.protocol&&"http:"!==l.protocol)throw new Error(`Unknown protocol, ${l.protocol}`);if(a)if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||"string"==typeof a);else{if("object"!=typeof a)throw new Error("Unknown body type.");a=JSON.stringify(a),o["Content-Type"]="application/json"}c=new Headers({...o||{},...c});const u=await fetch(l,{method:t,headers:c,body:a});if(u.statusCode=u.status,!e.has(u.status))throw new n(u);return"json"===r?u.json():"buffer"===r?u.arrayBuffer():"string"===r?u.text():u}))},111:e=>{"use strict";const t=new Set(["json","buffer","string"]);e.exports=e=>(...r)=>{const o=new Set;let n,s,i,a="";return r.forEach((e=>{if("string"==typeof e)if(e.toUpperCase()===e){if(n)throw new Error(`Can't set method to ${e}, already set to ${n}.`);n=e}else if(e.startsWith("http:")||e.startsWith("https:"))a=e;else{if(!t.has(e))throw new Error(`Unknown encoding, ${e}`);s=e}else if("number"==typeof e)o.add(e);else{if("object"!=typeof e)throw new Error("Unknown type: "+typeof e);if(Array.isArray(e)||e instanceof Set)e.forEach((e=>o.add(e)));else{if(i)throw new Error("Cannot set headers twice.");i=e}}})),n||(n="GET"),0===o.size&&o.add(200),e(o,n,s,i,a)}},130:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let o=0,n=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(o++,"%c"===e&&(n=o))})),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(123)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},123:(e,t,r)=>{e.exports=function(e){function t(e){let r,n,s,i=null;function a(...e){if(!a.enabled)return;const o=a,n=Number(new Date),s=n-(r||n);o.diff=s,o.prev=r,o.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,n)=>{if("%%"===r)return"%";i++;const s=t.formatters[n];if("function"==typeof s){const t=e[i];r=s.call(o,t),e.splice(i,1),i--}return r})),t.formatArgs.call(o,e),(o.log||t.log).apply(o,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=o,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(n!==t.namespaces&&(n=t.namespaces,s=t.enabled(e)),s),set:e=>{i=e}}),"function"==typeof t.init&&t.init(a),a}function o(e,r){const o=t(this.namespace+(void 0===r?":":r)+e);return o.log=this.log,o}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const o=("string"==typeof e?e:"").split(/[\s,]+/),n=o.length;for(r=0;r<n;r++)o[r]&&("-"===(e=o[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,o;for(r=0,o=t.skips.length;r<o;r++)if(t.skips[r].test(e))return!1;for(r=0,o=t.names.length;r<o;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(378),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},740:e=>{"use strict";function t(e,t){for(const r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}e.exports=function(e,r,o){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");o||(o={}),"object"==typeof r&&(o=r,r=void 0),null!=r&&(o.code=r);try{return t(e,o)}catch(r){o.message=e.message,o.stack=e.stack;const n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(e)),t(new n,o)}}},378:e=>{var t=1e3,r=60*t,o=60*r,n=24*o;function s(e,t,r,o){var n=t>=1.5*r;return Math.round(e/r)+" "+o+(n?"s":"")}e.exports=function(e,i){i=i||{};var a,c,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(s){var i=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return i*n;case"hours":case"hour":case"hrs":case"hr":case"h":return i*o;case"minutes":case"minute":case"mins":case"min":case"m":return i*r;case"seconds":case"second":case"secs":case"sec":case"s":return i*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(e);if("number"===l&&isFinite(e))return i.long?(a=e,(c=Math.abs(a))>=n?s(a,c,n,"day"):c>=o?s(a,c,o,"hour"):c>=r?s(a,c,r,"minute"):c>=t?s(a,c,t,"second"):a+" ms"):function(e){var s=Math.abs(e);return s>=n?Math.round(e/n)+"d":s>=o?Math.round(e/o)+"h":s>=r?Math.round(e/r)+"m":s>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},771:(e,t,r)=>{"use strict";var o=r(740),n=r(520),s=Object.prototype.hasOwnProperty;function i(e){return e&&"EPROMISERETRY"===e.code&&s.call(e,"retried")}e.exports=function(e,t){var r,s;return"object"==typeof e&&"function"==typeof t&&(r=t,t=e,e=r),s=n.operation(t),new Promise((function(t,r){s.attempt((function(n){Promise.resolve().then((function(){return e((function(e){throw i(e)&&(e=e.retried),o(new Error("Retrying"),"EPROMISERETRY",{retried:e})}),n)})).then(t,(function(e){i(e)&&(e=e.retried,s.retry(e||new Error))||r(e)}))}))}))}},520:(e,t,r)=>{e.exports=r(815)},815:(e,t,r)=>{var o=r(947);t.operation=function(e){var r=t.timeouts(e);return new o(r,{forever:e&&e.forever,unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],n=0;n<t.retries;n++)o.push(this.createTimeout(n,t));return e&&e.forever&&!o.length&&o.push(this.createTimeout(n,t)),o.sort((function(e,t){return e-t})),o},t.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,o=Math.round(r*t.minTimeout*Math.pow(t.factor,e));return Math.min(o,t.maxTimeout)},t.wrap=function(e,r,o){if(r instanceof Array&&(o=r,r=null),!o)for(var n in o=[],e)"function"==typeof e[n]&&o.push(n);for(var s=0;s<o.length;s++){var i=o[s],a=e[i];e[i]=function(o){var n=t.operation(r),s=Array.prototype.slice.call(arguments,1),i=s.pop();s.push((function(e){n.retry(e)||(e&&(arguments[0]=n.mainError()),i.apply(this,arguments))})),n.attempt((function(){o.apply(e,s)}))}.bind(e,a),e[i].options=r}}},947:e=>{function t(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),r=this._timeouts.shift()}var o=this,n=setTimeout((function(){o._attempts++,o._operationTimeoutCb&&(o._timeout=setTimeout((function(){o._operationTimeoutCb(o._attempts)}),o._operationTimeout),o._options.unref&&o._timeout.unref()),o._fn(o._attempts)}),r);return this._options.unref&&n.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,o=0;o<this._errors.length;o++){var n=this._errors[o],s=n.message,i=(e[s]||0)+1;e[s]=i,i>=r&&(t=n,r=i)}return t}},730:(e,t,r)=>{"use strict";const o=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,n=()=>{const e={enabled:"undefined"!=typeof process&&"0"!==process.env.FORCE_COLOR,visible:!0,styles:{},keys:{}},t=(e,t,r)=>"function"==typeof e?e(t):e.wrap(t,r),n=(r,o)=>{if(""===r||null==r)return"";if(!1===e.enabled)return r;if(!1===e.visible)return"";let n=""+r,s=n.includes("\n"),i=o.length;for(i>0&&o.includes("unstyle")&&(o=[...new Set(["unstyle",...o])].reverse());i-- >0;)n=t(e.styles[o[i]],n,s);return n},s=(t,r,o)=>{e.styles[t]=(e=>{let t=e.open=`[${e.codes[0]}m`,r=e.close=`[${e.codes[1]}m`,o=e.regex=new RegExp(`\\u001b\\[${e.codes[1]}m`,"g");return e.wrap=(e,n)=>{e.includes(r)&&(e=e.replace(o,r+t));let s=t+e+r;return n?s.replace(/\r*\n/g,`${r}$&${t}`):s},e})({name:t,codes:r}),(e.keys[o]||(e.keys[o]=[])).push(t),Reflect.defineProperty(e,t,{configurable:!0,enumerable:!0,set(r){e.alias(t,r)},get(){let r=e=>n(e,r.stack);return Reflect.setPrototypeOf(r,e),r.stack=this.stack?this.stack.concat(t):[t],r}})};return s("reset",[0,0],"modifier"),s("bold",[1,22],"modifier"),s("dim",[2,22],"modifier"),s("italic",[3,23],"modifier"),s("underline",[4,24],"modifier"),s("inverse",[7,27],"modifier"),s("hidden",[8,28],"modifier"),s("strikethrough",[9,29],"modifier"),s("black",[30,39],"color"),s("red",[31,39],"color"),s("green",[32,39],"color"),s("yellow",[33,39],"color"),s("blue",[34,39],"color"),s("magenta",[35,39],"color"),s("cyan",[36,39],"color"),s("white",[37,39],"color"),s("gray",[90,39],"color"),s("grey",[90,39],"color"),s("bgBlack",[40,49],"bg"),s("bgRed",[41,49],"bg"),s("bgGreen",[42,49],"bg"),s("bgYellow",[43,49],"bg"),s("bgBlue",[44,49],"bg"),s("bgMagenta",[45,49],"bg"),s("bgCyan",[46,49],"bg"),s("bgWhite",[47,49],"bg"),s("blackBright",[90,39],"bright"),s("redBright",[91,39],"bright"),s("greenBright",[92,39],"bright"),s("yellowBright",[93,39],"bright"),s("blueBright",[94,39],"bright"),s("magentaBright",[95,39],"bright"),s("cyanBright",[96,39],"bright"),s("whiteBright",[97,39],"bright"),s("bgBlackBright",[100,49],"bgBright"),s("bgRedBright",[101,49],"bgBright"),s("bgGreenBright",[102,49],"bgBright"),s("bgYellowBright",[103,49],"bgBright"),s("bgBlueBright",[104,49],"bgBright"),s("bgMagentaBright",[105,49],"bgBright"),s("bgCyanBright",[106,49],"bgBright"),s("bgWhiteBright",[107,49],"bgBright"),e.ansiRegex=o,e.hasColor=e.hasAnsi=t=>(e.ansiRegex.lastIndex=0,"string"==typeof t&&""!==t&&e.ansiRegex.test(t)),e.alias=(t,r)=>{let o="string"==typeof r?e[r]:r;if("function"!=typeof o)throw new TypeError("Expected alias to be the name of an existing color (string) or a function");o.stack||(Reflect.defineProperty(o,"name",{value:t}),e.styles[t]=o,o.stack=[t]),Reflect.defineProperty(e,t,{configurable:!0,enumerable:!0,set(r){e.alias(t,r)},get(){let t=e=>n(e,t.stack);return Reflect.setPrototypeOf(t,e),t.stack=this.stack?this.stack.concat(o.stack):o.stack,t}})},e.theme=t=>{if(null===(r=t)||"object"!=typeof r||Array.isArray(r))throw new TypeError("Expected theme to be an object");var r;for(let r of Object.keys(t))e.alias(r,t[r]);return e},e.alias("unstyle",(t=>"string"==typeof t&&""!==t?(e.ansiRegex.lastIndex=0,t.replace(e.ansiRegex,"")):"")),e.alias("noop",(e=>e)),e.none=e.clear=e.noop,e.stripColor=e.unstyle,e.symbols=r(142),e.define=s,e};e.exports=n(),e.exports.create=n},142:e=>{"use strict";const t="undefined"!=typeof process&&"Hyper"===process.env.TERM_PROGRAM,r="undefined"!=typeof process&&"win32"===process.platform,o="undefined"!=typeof process&&"linux"===process.platform,n={ballotDisabled:"â˜’",ballotOff:"â˜",ballotOn:"â˜‘",bullet:"â€¢",bulletWhite:"â—¦",fullBlock:"â–ˆ",heart:"â¤",identicalTo:"â‰¡",line:"â”€",mark:"â€»",middot:"Â·",minus:"ï¼",multiplication:"Ã—",obelus:"Ã·",pencilDownRight:"âœŽ",pencilRight:"âœ",pencilUpRight:"âœ",percent:"%",pilcrow2:"â¡",pilcrow:"Â¶",plusMinus:"Â±",question:"?",section:"Â§",starsOff:"â˜†",starsOn:"â˜…",upDownArrow:"â†•"},s=Object.assign({},n,{check:"âˆš",cross:"Ã—",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"Â»",radioOff:"( )",radioOn:"(*)",warning:"â€¼"}),i=Object.assign({},n,{ballotCross:"âœ˜",check:"âœ”",cross:"âœ–",ellipsisLarge:"â‹¯",ellipsis:"â€¦",info:"â„¹",questionFull:"ï¼Ÿ",questionSmall:"ï¹–",pointer:o?"â–¸":"â¯",pointerSmall:o?"â€£":"â€º",radioOff:"â—¯",radioOn:"â—‰",warning:"âš "});e.exports=r&&!t?s:i,Reflect.defineProperty(e.exports,"common",{enumerable:!1,value:n}),Reflect.defineProperty(e.exports,"windows",{enumerable:!1,value:s}),Reflect.defineProperty(e.exports,"other",{enumerable:!1,value:i})}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";r.r(o),r.d(o,{CompileError:()=>b,compile:()=>C,displayUrl:()=>y,parseCode:()=>g});var e=r(751),t=r(771),n=r(730),s=r(130);const{unstyle:i}=n,a=s("reveal-compiler-explorer:compiler-explorer-directives"),c={cpp:"c++",hpp:"c++",cc:"c++",hh:"c++","h++":"c++",cxx:"c++",hxx:"c++",ada:"ada",x86asm:"assembly",h:"c",f90:"fortran",f95:"fortran",golang:"go",hs:"haskell",nimrod:"nim",ml:"ocaml",py:"python",gyp:"python",rs:"rust"},l="https://godbolt.org",u=e(`${l}/api`,"GET","json",{Accept:"application/json"}),p=e(`${l}/api`,"POST","json"),f=(()=>{let e;return async function(){if(!e){const t=new Map([["c++",{options:"-O2 -march=haswell -Wall -Wextra -pedantic -Wno-unused-variable -Wno-unused-parameter",mainRegex:/\bmain\(/}],["c",{options:"-O2 -march=haswell -Wall -Wextra -pedantic -Wno-unused-variable -Wno-unused-parameter",mainRegex:/\bmain\(/}],["d",{mainRegex:/\bmain\(/}]]);a(`reading languages from ${l}`);const r=await u("/languages?fields=id,defaultCompiler");e=new Map(r.map((({id:e,defaultCompiler:r})=>[e,Object.assign({compiler:r},t.get(e))]))),a("default language configuration is %o",e)}return e}})(),h={runMain:!0,useLocal:!1,localPort:10240,directives:[]},m=e=>new RegExp(`^\\s*\\/\\/\\/\\s*${e}$`),d=[["compiler=(.*)",(e,t)=>e.slice(1).forEach((e=>{t.compiler=e}))],["options=(.*)",(e,t)=>e.slice(1).forEach((e=>t.options=e))],["options\\+=(.*)",(e,t)=>e.slice(1).forEach((e=>t.options+=" "+e))],["libs=(\\w+:\\w+(?:,\\w+:\\w+)*)",(e,t)=>e.slice(1).forEach((e=>{[...e.matchAll(/(\w+):(\w+)/g)].forEach((e=>{t.libs.push({name:e[1],ver:e[2]})}))}))],["(no)?execute",(e,t)=>e.slice(1).forEach((e=>t.execute=!e))],["external",(e,t)=>e.forEach((e=>t.forceExternal=!0))],["(un)?hide",(e,t)=>e.slice(1).forEach((e=>t.hide=!e))]],g=async(e,t,r)=>{a("parsing %o, language %s, config %o",e,t,r);const o=await f();if(t=function(e,t,r){return e.split(" ").map((e=>e.replace(/\blang(?:uage)?-([\w-]+)\b/i,"$1"))).map((e=>c[e]||e)).filter((e=>t.has(e))).concat(r)[0]}(t,o,r&&r.language),!o.has(t))return a("language %s is not supported",t),null;r=Object.assign({},h,o.get(t),r,r&&r[t]);const n=d.concat(r.directives).map((([e,t])=>[m(e),t])),s=unescape(e).split("\n"),i=(e,t)=>e.match(t)||[],u={source:[],displaySource:[],language:t,compiler:r.compiler,options:r.options||"",libs:r.libs||[],forceExternal:!1,hide:!1};for(const e of s)e.match(m(".*"))?n.forEach((([t,r])=>r(i(e,t),u))):(r.runMain&&r.mainRegex&&e.match(r.mainRegex)&&!u.hasOwnProperty("execute")&&(u.execute=!0),u.source.push(e),u.hide||u.displaySource.push(e));return u.baseUrl=r.useLocal&&!u.forceExternal?`http://localhost:${r.localPort}`:l,u.source=u.source.join("\n"),u.displaySource=u.displaySource.join("\n"),delete u.hide,delete u.forceExternal,a("parse result %o",u),u},y=e=>{let t={version:4,content:[{type:"row",content:[{type:"component",componentName:"codeEditor",componentState:{id:1,source:e.source,options:{compileOnChange:!0,colouriseAsm:!0},fontScale:2.5}},{type:"column",content:[{type:"component",componentName:"compiler",componentState:{source:1,lang:e.language,compiler:e.compiler,options:e.options,libs:e.libs,fontScale:3,filters:{commentOnly:!0,directives:!0,intel:!0,labels:!0,trim:!0,execute:e.execute}}},{type:"component",componentName:"output",componentState:{compiler:1}}]}]}],settings:{theme:"dark"}},r=encodeURIComponent(JSON.stringify(t));return`${e.baseUrl}/#${r}`};class b extends Error{constructor(e,t){super(t),this.name="CompileError",this.code=e}}const C=async(e,r={})=>{a("compiling %o",e);const o={source:e.source,options:{userArguments:e.options||"",filters:{execute:e.execute||!1},libraries:(e.libs||[]).map((function(e){return{id:e.name,version:e.ver}}))}},n=await t(r,(async t=>{try{return await p(`/compiler/${e.compiler}/compile`,o)}catch(e){throw a("compile error %o",e),5===Math.trunc(e.statusCode/100)&&(a("retrying"),t(e)),e}}));a("response is %o",n);const s=e=>i(e.stderr.concat(e.stdout).map((e=>e.text)).join("\n"));if(0===n.code){if(e.execute){if(0===n.execResult.buildResult.code)return s(n.execResult);throw new b(n.execResult.buildResult.code,s(n.execResult.buildResult))}return s(n)}throw new b(n.code,s(n))}})(),exports.CompileError=o.CompileError,exports.compile=o.compile,exports.displayUrl=o.displayUrl,exports.parseCode=o.parseCode,Object.defineProperty(exports,"__esModule",{value:!0})})();
//# sourceMappingURL=compiler-explorer-directives.cjs.map